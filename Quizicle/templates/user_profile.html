{% extends 'base.html' %}
{% block title %}User Profile{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2>User Profile</h2>

    <!-- Display Username -->
    <form method="post">
        {% csrf_token %}
        <div class="mb-3">
            <label for="new_username" class="form-label">Username:</label>
            <input type="text" id="new_username" name="new_username" value="{{ user.username }}" class="form-control">
        </div>
        <button type="submit" name="change_username" class="btn btn-primary">Change Username</button>
    </form>

    <hr>

    <!-- Change Password -->
    <h4>Change Password</h4>
    <form method="post">
        {% csrf_token %}
        {{ password_form.as_p }}
        <button type="submit" name="change_password" class="btn btn-primary">Change Password</button>
    </form>

    <hr>

    <!-- Delete Account -->
    <h4>Delete Account</h4>
    <form method="post">
        {% csrf_token %}
        <div class="mb-3">
            <label for="password" class="form-label">Confirm with Password:</label>
            <input type="password" id="password" name="password" class="form-control" required>
        </div>
        <button type="submit" name="delete_account" class="btn btn-danger">Delete Account</button>
    </form>

    <hr>

    <!-- Delete All Data -->
    <h4>Delete All Associated Data (Quizzes, Results, Reports)</h4>
    <form method="post">
        {% csrf_token %}
        <div class="mb-3">
            <label for="password" class="form-label">Confirm with Password:</label>
            <input type="password" id="password" name="password" class="form-control" required>
        </div>
        <button type="submit" name="delete_all_data" class="btn btn-warning">Delete All Data</button>
    </form>
</div>
{% endblock %}